function spuCreateCookie(t,e,i){if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var o="; expires="+n.toGMTString()}else var o="";document.cookie=t+"="+e+o+"; path=/"}function spuReadCookie(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return null}function googleCB(t){if("on"==t.state){var e=jQuery(".spu-gogl").data("box-id");e&&SPU.hide(e)}}function closeGoogle(t){if("confirm"==t.type){var e=jQuery(".spu-gogl").data("box-id");e&&SPU.hide(e)}}window.SPU=function($){function t(t){var e=r[t],i=$(window).width(),n=$(window).height(),o=e.height(),a=e.width();e.css({position:"fixed",top:n/2-o/2,left:i/2-a/2})}function e(t){var e=$(t).find(".spu-facebook");if(e.length){var i=e.find(".fb-like > span").width();if(0==i){var n=e.find(".fb-like").data("layout");e.append("box_count"==n?'<style type="text/css"> #'+$(t).attr("id")+" .fb-like iframe, #"+$(t).attr("id")+" .fb_iframe_widget span, #"+$(t).attr("id")+" .fb_iframe_widget{ height: 63px !important;width: 80px !important;}</style>":'<style type="text/css"> #'+$(t).attr("id")+" .fb-like iframe, #"+$(t).attr("id")+" .fb_iframe_widget span, #"+$(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;width: 80px !important;}</style>")}}}function i(e,i){var n=r[e],o=$("#spu-bg-"+e),a=n.data("bgopa");if(n.is(":animated"))return!1;if(i===!0&&n.is(":visible")||i===!1&&n.is(":hidden"))return!1;if(i===!1){var s=parseInt(n.data("cookie"));s>0&&spuCreateCookie("spu_box_"+e,!0,s)}else n.hasClass("spu-centered")&&t(e);var d=n.data("spuanimation");return"fade"===d?n.fadeToggle("slow"):n.slideToggle("slow"),i===!0&&a>0?o.fadeIn():o.fadeOut(),i}function n(t,e,i,n){var o={url:spuvar.ajax_url,data:t,cache:!1,type:"POST",dataType:"json",timeout:3e4},i=i||!1,n=n||!1;e&&(o.url=e),i&&(o.success=i),n&&(o.error=n),$.ajax(o)}var o=$(window).height(),a=spuvar.is_admin,r=[];return $(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),$(".spu-box").each(function(){spuvar.safe_mode&&$(this).prependTo("body");var t=$(this),s=t.data("trigger"),d=0,u=1===parseInt(t.data("test-mode")),f=t.data("box-id"),c=1===parseInt(t.data("auto-hide")),p=parseInt(t.data("seconds-close")),l=parseInt(t.data("trigger-number"),10),h="percentage"==s?parseInt(t.data("trigger-number"),10)/100:.8,g=h*$(document).height();e(t),$(".spu-google").width($(".spu-google").width()-20),$(".spu-twitter").width($(".spu-twitter").width()-12);var w=0,m=0,b=$(this).find(".spu-content").width(),v=t.data("total");v&&!spuvar.disable_style&&($(this).find(".spu-shortcode").each(function(){w+=$(this).width()}),m=b-w),m>0&&($(this).find(".spu-shortcode").each(function(){3==v?$(this).css("margin-left",m/(v-1)):$(this).css("margin-left",m/2)}),2==v?$(this).find(".spu-shortcode").last().css("margin-left",0):3==v&&$(this).find(".spu-shortcode").first().css("margin-left",0)),$(document).keyup(function(t){27==t.keyCode&&i(f,!1)});var y=navigator.userAgent,x=y.match(/iPad/i)||y.match(/iPhone/i)?"touchstart":"click";$("body").on(x,function(t){t.which&&i(f,!1)}),$("body").on(x,".spu-box",function(t){t.stopPropagation()}),t.hide().css("left",""),r[f]=t;var _=function(){d&&clearTimeout(d),d=window.setTimeout(function(){var t=$(window).scrollTop(),e=t+o>=g;e?(c||$(window).unbind("scroll",_),i(f,!0)):i(f,!1)},100)},k=function(){d&&clearTimeout(d),d=window.setTimeout(function(){i(f,!0)},1e3*l)},T=spuReadCookie("spu_box_"+f);if((void 0==T||a&&u)&&("seconds"==s?k():($(window).bind("scroll",_),_()),window.location.hash&&window.location.hash.length>0)){var C=window.location.hash,P;C.substring(1)===t.attr("id")&&setTimeout(function(){i(f,!0)},100)}t.find(".spu-close").click(function(){i(f,!1),"percentage"==s&&$(window).unbind("scroll",_)}),$('a[href="#'+t.attr("id")+'"]').click(function(){return i(f,!0),!1}),t.find(".gform_wrapper form").addClass("gravity-form"),t.find('form:not(".wpcf7-form, .gravity-form")').submit(function(t){t.preventDefault();var e=!0,o=$(this),a=o.serialize(),r=o.attr("action"),s=function(t){var e=$(t).filter("#spu-"+f).html();$("#spu-"+f).html(e),setTimeout(function(){i(f,!1)},2e3)};return n(a,r,s,"","html"),e}),$("body").on("mailsent.wpcf7",function(){i(f,!1)}),$(document).on("gform_confirmation_loaded",function(){i(f,!1)})}),{show:function(t){return i(t,!0)},hide:function(t){return i(t,!1)},request:function(t,e,i,o){return n(t,e,i,o)}}}(window.jQuery),jQuery(function($){function t(){FB.Event.subscribe("edge.create",function(t,e){var i=$(e).parents(".spu-box").data("box-id");i&&(SPU.hide(i),SPU.track(i,!0))}),i=!0,clearInterval(n)}function e(t){var e=$(t.target).parents(".spu-box").data("box-id");e&&SPU.hide(e)}var i=!1,n=setInterval(function(){"undefined"==typeof FB||i||t()},1e3);"undefined"!=typeof twttr&&twttr.ready(function(t){t.events.bind("tweet",e),t.events.bind("follow",e)})});