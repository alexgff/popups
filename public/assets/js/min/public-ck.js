function spuCreateCookie(t,i,e){if(e){var n=new Date;n.setTime(n.getTime()+24*e*60*60*1e3);var o="; expires="+n.toGMTString()}else var o="";document.cookie=t+"="+i+o+"; path=/"}function spuReadCookie(t){for(var i=t+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var o=e[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(i))return o.substring(i.length,o.length)}return null}jQuery(window).load(function(){window.SPU=function($){function t(t){var i=o[t],e=$(window).width(),n=$(window).height(),s=i.height(),a=i.width();i.css({position:"fixed",top:n/2-s/2,left:e/2-a/2})}function i(t,i){var e=o[t],n=$("#spu-bg-"+t),s=e.data("bgopa");if(e.is(":animated"))return!1;if(i===!0&&e.is(":visible")||i===!1&&e.is(":hidden"))return!1;if(i===!1){var a=parseInt(e.data("cookie"));a>0&&spuCreateCookie("spu_box_"+t,!0,a)}var r=e.data("animation");return"fade"===r?e.fadeToggle("slow"):e.slideToggle("slow"),i===!0&&s>0?n.fadeIn():n.fadeOut(),i}var e=$(window).height(),n=spuvar.is_admin,o=[];return $(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),$(".spu-box").each(function(){var s=$(this),a=s.data("trigger"),r=0,d=1===parseInt(s.data("test-mode")),c=s.data("box-id"),u=1===parseInt(s.data("auto-hide")),h=1===parseInt(s.data("advanced-close")),l=parseInt(s.data("seconds-close"));$(".spu-google").width($(".spu-google").width()-20),$(".spu-twitter").width($(".spu-twitter").width()-12);var f=0,p=0,g=$(this).find(".spu-content").width(),w=s.data("total");if(w&&($(this).find(".spu-shortcode").each(function(){f+=$(this).width()}),p=g-f),p>0&&($(this).find(".spu-shortcode").each(function(){3==w?$(this).css("margin-left",p/(w-1)):$(this).css("margin-left",p/2)}),2==w?$(this).find(".spu-shortcode").last().css("margin-left",0):3==w&&$(this).find(".spu-shortcode").first().css("margin-left",0)),h){$(document).keyup(function(t){27==t.keyCode&&i(c,!1)});var m=navigator.userAgent,v=m.match(/iPad/i)||m.match(/iPhone/i)?"touchstart":"click";$("body").on(v,function(t){console.log(v.target),i(c,!1)}),$(".spu-box").on(v,function(t){t.stopPropagation()})}if(s.hide().css("left",""),o[c]=s,"seconds"==a)var b=parseInt(s.data("trigger-number"),10);else var k="percentage"==a?parseInt(s.data("trigger-number"),10)/100:.8,T=k*$(document).height();var C=function(){r&&clearTimeout(r),r=window.setTimeout(function(){var n=$(window).scrollTop(),o=n+e>=T;o?(u||$(window).unbind("scroll",C),s.hasClass("spu-centered")&&t(c),i(c,!0)):i(c,!1)},100)},x=function(){r&&clearTimeout(r),r=window.setTimeout(function(){s.hasClass("spu-centered")&&t(c),i(c,!0)},1e3*b)},I=spuReadCookie("spu_box_"+c);if((void 0==I||n&&d)&&("seconds"==a?x():($(window).bind("scroll",C),C()),window.location.hash&&window.location.hash.length>0)){var y=window.location.hash,_;y.substring(1)===s.attr("id")&&setTimeout(function(){i(c,!0)},100)}s.find(".spu-close").click(function(){i(c,!1),"percentage"==a&&$(window).unbind("scroll",C)}),$('a[href="#'+s.attr("id")+'"]').click(function(){return s.hasClass("spu-centered")&&t(c),i(c,!0),!1})}),{show:function(t){return i(t,!0)},hide:function(t){return i(t,!1)}}}(window.jQuery)});