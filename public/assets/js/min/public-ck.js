function spuCreateCookie(t,i,n){if(n){var e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3);var o="; expires="+e.toGMTString()}else var o="";document.cookie=t+"="+i+o+"; path=/"}function spuReadCookie(t){for(var i=t+"=",n=document.cookie.split(";"),e=0;e<n.length;e++){for(var o=n[e];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(i))return o.substring(i.length,o.length)}return null}jQuery(window).load(function(){window.SPU=function($){function t(t){var i=o[t],n=$(window).width(),e=$(window).height(),a=i.height(),s=i.width();i.css({position:"fixed",top:e/2-a/2,left:n/2-s/2})}function i(i,n){var e=o[i],a=$("#spu-bg-"+i),s=e.data("bgopa");if(e.is(":animated"))return!1;if(n===!0&&e.is(":visible")||n===!1&&e.is(":hidden"))return!1;if(n===!1){var r=parseInt(e.data("cookie"));r>0&&spuCreateCookie("spu_box_"+i,!0,r)}e.hasClass("spu-centered")&&t(i);var d=e.data("animation");return"fade"===d?e.fadeToggle("slow"):e.slideToggle("slow"),n===!0&&s>0?a.fadeIn():a.fadeOut(),n}var n=$(window).height(),e=spuvar.is_admin,o=[];return $(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),$(".spu-box").each(function(){var t=$(this),a=t.data("trigger"),s=0,r=1===parseInt(t.data("test-mode")),d=t.data("box-id"),u=1===parseInt(t.data("auto-hide")),c=1===parseInt(t.data("advanced-close")),h=parseInt(t.data("seconds-close")),f=parseInt(t.data("trigger-number"),10),l="percentage"==a?parseInt(t.data("trigger-number"),10)/100:.8,g=l*$(document).height();$(".spu-google").width($(".spu-google").width()-20),$(".spu-twitter").width($(".spu-twitter").width()-12);var p=0,w=0,m=$(this).find(".spu-content").width(),v=t.data("total");if(v&&($(this).find(".spu-shortcode").each(function(){p+=$(this).width()}),w=m-p),w>0&&($(this).find(".spu-shortcode").each(function(){3==v?$(this).css("margin-left",w/(v-1)):$(this).css("margin-left",w/2)}),2==v?$(this).find(".spu-shortcode").last().css("margin-left",0):3==v&&$(this).find(".spu-shortcode").first().css("margin-left",0)),c){$(document).keyup(function(t){27==t.keyCode&&i(d,!1)});var b=navigator.userAgent,k=b.match(/iPad/i)||b.match(/iPhone/i)?"touchstart":"click";$("body").on(k,function(t){console.log(k.target),i(d,!1)}),$(".spu-box").on(k,function(t){t.stopPropagation()})}t.hide().css("left",""),o[d]=t;var T=function(){s&&clearTimeout(s),s=window.setTimeout(function(){var t=$(window).scrollTop(),e=t+n>=g;e?(u||$(window).unbind("scroll",T),i(d,!0)):i(d,!1)},100)},x=function(){s&&clearTimeout(s),s=window.setTimeout(function(){i(d,!0)},1e3*f)},C=spuReadCookie("spu_box_"+d);if((void 0==C||e&&r)&&("seconds"==a?x():($(window).bind("scroll",T),T()),window.location.hash&&window.location.hash.length>0)){var I=window.location.hash,y;I.substring(1)===t.attr("id")&&setTimeout(function(){i(d,!0)},100)}t.find(".spu-close").click(function(){i(d,!1),"percentage"==a&&$(window).unbind("scroll",T)}),$('a[href="#'+t.attr("id")+'"]').click(function(){return i(d,!0),!1})}),{show:function(t){return i(t,!0)},hide:function(t){return i(t,!1)}}}(window.jQuery)});